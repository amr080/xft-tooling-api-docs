<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-1.0 plugin-docs plugin-id-default docs-doc-id-0x-swap-api/guides/use-0x-api-liquidity-in-your-smart-contracts">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.4.0">
<title data-rh="true">Use 0x Swap API Liquidity in Your Smart Contracts | 0x</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://0x.org/docs/img/0x-social-card.jpg"><meta data-rh="true" name="twitter:image" content="https://0x.org/docs/img/0x-social-card.jpg"><meta data-rh="true" property="og:url" content="https://0x.org/docs/0x-swap-api/guides/use-0x-api-liquidity-in-your-smart-contracts"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="1.0"><meta data-rh="true" name="docusaurus_tag" content="docs-default-1.0"><meta data-rh="true" name="docsearch:version" content="1.0"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-1.0"><meta data-rh="true" property="og:title" content="Use 0x Swap API Liquidity in Your Smart Contracts | 0x"><meta data-rh="true" name="description" content="Use Swap API Liquidity in Your Smart Contracts"><meta data-rh="true" property="og:description" content="Use Swap API Liquidity in Your Smart Contracts"><link data-rh="true" rel="icon" href="/docs/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://0x.org/docs/0x-swap-api/guides/use-0x-api-liquidity-in-your-smart-contracts"><link data-rh="true" rel="alternate" href="https://0x.org/docs/0x-swap-api/guides/use-0x-api-liquidity-in-your-smart-contracts" hreflang="en"><link data-rh="true" rel="alternate" href="https://0x.org/docs/0x-swap-api/guides/use-0x-api-liquidity-in-your-smart-contracts" hreflang="x-default"><link rel="preconnect" href="https://www.google-analytics.com">
<link rel="preconnect" href="https://www.googletagmanager.com">
<script async src="https://www.googletagmanager.com/gtag/js?id=G-Z369GEYN6J"></script>
<script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-Z369GEYN6J",{anonymize_ip:!0})</script>





<script src="./docs/scripts/fullstory.js" async innerhtml="window[&#39;_fs_host&#39;] = &#39;fullstory.com&#39;;
    window[&#39;_fs_script&#39;] = &#39;edge.fullstory.com/s/fs.js&#39;;
    window[&#39;_fs_org&#39;] = &#39;o-1RR7B6-na1&#39;;
    window[&#39;_fs_namespace&#39;] = &#39;FS&#39;;
    !function(m,n,e,t,l,o,g,y){var s,f,a=function(h){
    return!(h in m)||(m.console&amp;&amp;m.console.log&amp;&amp;m.console.log(&#39;FullStory namespace conflict. Please set window[&quot;_fs_namespace&quot;].&#39;),!1)}(e)
    ;function j(b){var h,d=[];function k(){h&amp;&amp;(d.forEach((function(b){var d;try{d=b[h[0]]&amp;&amp;b[h[0]](h[1])}catch(h){return void(b[3]&amp;&amp;b[3](h))}
    d&amp;&amp;d.then?d.then(b[2],b[3]):b[2]&amp;&amp;b[2](d)})),d.length=0)}function r(b){return function(d){h||(h=[b,d],k())}}return b(r(0),r(1)),{
    then:function(b,h){return j((function(r,i){d.push([b,h,r,i]),k()}))}}}a&amp;&amp;(g=m[e]=function(){var b=function(b,d,k,r){function i(i,c){
    h(b,d,k,i,c,r)}r=r||2;var c,u=/Async$/;return u.test(b)?(b=b.replace(u,&quot;&quot;),&quot;function&quot;==typeof Promise?new Promise(i):j(i)):h(b,d,k,c,c,r)}
    ;function h(h,d,k,r,i,c){return b._api?b._api(h,d,k,r,i,c):(b.q&amp;&amp;b.q.push([h,d,k,r,i,c]),null)}return b.q=[],b}(),y=function(b){function h(h){
    &quot;function&quot;==typeof h[4]&amp;&amp;h[4](new Error(b))}var d=g.q;if(d){for(var k=0;k&lt;d.length;k++)h(d[k]);d.length=0,d.push=h}},function(){
    (o=n.createElement(t)).async=!0,o.crossOrigin=&quot;anonymous&quot;,o.src=&quot;https://&quot;+l,o.onerror=function(){y(&quot;Error loading &quot;+l)}
    ;var b=n.getElementsByTagName(t)[0];b.parentNode.insertBefore(o,b)}(),function(){function b(){}function h(b,h,d){g(b,h,d,1)}function d(b,d,k){
    h(&quot;setProperties&quot;,{type:b,properties:d},k)}function k(b,h){d(&quot;user&quot;,b,h)}function r(b,h,d){k({uid:b},d),h&amp;&amp;k(h,d)}g.identify=r,g.setUserVars=k,
    g.identifyAccount=b,g.clearUserCookie=b,g.setVars=d,g.event=function(b,d,k){h(&quot;trackEvent&quot;,{name:b,properties:d},k)},g.anonymize=function(){r(!1)
    },g.shutdown=function(){h(&quot;shutdown&quot;)},g.restart=function(){h(&quot;restart&quot;)},g.log=function(b,d){h(&quot;log&quot;,{level:b,msg:d})},g.consent=function(b){
    h(&quot;setIdentity&quot;,{consent:!arguments.length||b})}}(),s=&quot;fetch&quot;,f=&quot;XMLHttpRequest&quot;,g._w={},g._w[f]=m[f],g._w[s]=m[s],m[s]&amp;&amp;(m[s]=function(){
    return g._w[s].apply(this,arguments)}),g._v=&quot;2.0.0&quot;)}(window,document,window._fs_namespace,&quot;script&quot;,window._fs_script);"></script><link rel="stylesheet" href="/docs/assets/css/styles.effab45a.css">
<link rel="preload" href="/docs/assets/js/runtime~main.81fc3c4f.js" as="script">
<link rel="preload" href="/docs/assets/js/main.f8b18ed4.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}return t}()||function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"dark")}(),document.documentElement.setAttribute("data-announcement-bar-initially-dismissed",function(){try{return"true"===localStorage.getItem("docusaurus.announcement.dismiss")}catch(t){}return!1}())</script><div id="__docusaurus">
<div role="region" aria-label="Skip to main content"><a class="skipToContent_RBc3" href="#docusaurus_skipToContent_fallback">Skip to main content</a></div><div class="announcementBar_q6Dn" style="background-color:#A2FFC1" role="banner"><div class="announcementBarPlaceholder_f0g1"></div><div class="content_tpQP announcementBarContent_uv59">ðŸ“£ 0x API v2 is in closed beta. Get your app ready with the <a target="_blank" rel="noopener noreferrer" href="/docs/next/category/upgrading">v2 migration guide</a> to ensure a smooth transition.</div><button type="button" aria-label="Close" class="clean-btn close closeButton_NkLk announcementBarClose_O9cL"><svg viewBox="0 0 15 15" width="14" height="14"><g stroke="currentColor" stroke-width="3.1"><path d="M.75.75l13.5 13.5M14.25.75L.75 14.25"></path></g></svg></button></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/docs/"><div class="navbar__logo"><img src="/docs/img/0x-logo.png" alt="0x Docs" class="themedImage_EY2p themedImage--light_a36Z"><img src="/docs/img/0x-logo.png" alt="0x Docs" class="themedImage_EY2p themedImage--dark_RAPR"></div></a><a class="navbar__item navbar__link" href="/docs/introduction/welcome">Docs</a><div class="navbar__item dropdown dropdown--hoverable"><a class="navbar__link" aria-haspopup="true" aria-expanded="false" role="button" href="/docs/introduction/welcome">1.0</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/docs/next/introduction/welcome">ðŸš§ 2.0 beta</a></li><li><a aria-current="page" class="dropdown__link dropdown__link--active" href="/docs/0x-swap-api/guides/use-0x-api-liquidity-in-your-smart-contracts">1.0</a></li></ul></div></div><div class="navbar__items navbar__items--right"><a href="https://dashboard.0x.org/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Dashboard<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_lY7B"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><a href="https://discord.com/invite/official0x" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-discord-link"></a><a href="https://twitter.com/0xproject" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-twitter-link"></a><a href="https://github.com/0xProject/0x-examples" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-github-link"></a><div class="toggle_kwAF colorModeToggle_yraK"><button class="clean-btn toggleButton_ARJM toggleButtonDisabled_h4vk" type="button" disabled="" title="Switch between dark and light mode (currently dark mode)" aria-label="Switch between dark and light mode (currently dark mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_Oddq"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_hmTv"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_gume"><div class="mendable-search"><button id="ms-search-bar" style="background-color:#fff;border-color:#6B728033;color:#9ca3af" class="ms-global search-btn__input ms-m-0 ms-flex ms-h-10 ms-w-full ms-flex-row ms-items-center ms-justify-between ms-gap-2 ms-bg-gray-50 ms-p-1 ms-px-2 ms-outline-none ms-ring-0 ms-transition-all hover:ms-cursor-pointer sm:ms-p-2 sm:ms-px-3 ms-border ms-rounded-xl"><div class="ms-global search-btn__input-container ms-flex ms-w-full ms-min-w-0 ms-items-center ms-gap-0 sm:ms-gap-1"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 24 24" style="color:#9ca3af;fill:#9ca3af" class="search-btn__icon hover:fill-white ms-h-5 ms-w-5 ms-fill-gray-400 hover:ms-text-white focus:ms-fill-white focus:ms-text-white sm:ms-h-6 sm:ms-w-6" height="20" width="20" xmlns="http://www.w3.org/2000/svg"><path fill="none" d="M0 0h24v24H0z"></path><path d="M15.5 14h-.79l-.28-.27A6.471 6.471 0 0016 9.5 6.5 6.5 0 109.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"></path></svg><div id="userInput" style="color:#9ca3af" class="ms-global search-btn__input ms-w-full ms-flex-grow ms-truncate ms-bg-transparent ms-text-sm ms-outline-none ms-ring-0 ms-ring-transparent focus:ms-outline-none focus:ms-ring-0 focus:ms-ring-transparent sm:ms-text-base ms-ml-1 ms-flex ms-items-start ms-justify-start">Search...</div></div><div style="background-color:#fff;border-color:#6B728033;color:#9ca3af" class="search-btn__shortcut ms-z-10 ms-flex ms-flex-row ms-items-center ms-gap-1 ms-rounded-lg ms-border ms-py-[2px] ms-px-[8px] ms-text-xs ms-text-gray-400 ms-transition-all disabled:ms-bg-opacity-10"><span>CTRL</span><span>K</span></div></button><div></div></div></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_QDaL docsWrapper_NOCI"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_OuAX" type="button"></button><div class="docPage_vc49"><aside class="theme-doc-sidebar-container docSidebarContainer_QbHj"><div class="sidebarViewport_A8iB"><div class="sidebar_PTqm"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_ZYJB menuWithAnnouncementBar_bj1X"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="true" href="/docs/category/introduction">Introduction</a><button aria-label="Toggle the collapsible sidebar category &#x27;Introduction&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/introduction/welcome">Welcome</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/introduction/getting-started">Get started</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/introduction/introduction-to-0x">Introduction to 0x</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/introduction/guides">Learning resources</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/introduction/community">Support &amp; Community</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/introduction/0x-cheat-sheet">Chains, contracts, order types</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/introduction/error-codes">Error codes</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/developer-resources/faqs-and-troubleshooting">FAQ &amp; Troubleshooting</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" href="/docs/category/swap-api">Swap API</a><button aria-label="Toggle the collapsible sidebar category &#x27;Swap API&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/0x-swap-api/introduction">Introduction</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" tabindex="0" href="/docs/0x-swap-api/guides/swap-tokens-with-0x-swap-api">Guides</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/0x-swap-api/guides/swap-tokens-with-0x-swap-api">Get started with Swap API</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/0x-swap-api/guides/build-token-swap-dapp-nextjs">Build a token swap dApp (Next.js)</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/0x-swap-api/guides/how-to-build-a-token-swap-dapp-with-0x-api">Build a token swap dApp (HTML, CSS, JS)</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/0x-swap-api/guides/monetize-your-app-using-swap">Monetize your app</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/0x-swap-api/guides/working-in-the-testnet">Working in the testnet</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/docs/0x-swap-api/guides/accessing-rfq-liquidity/about-the-rfq-system">Accessing RFQ liquidity</a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/0x-swap-api/guides/use-0x-api-liquidity-in-your-smart-contracts">Use Swap API liquidity in your smart contracts</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/0x-swap-api/guides/troubleshooting-swap-api">Troubleshooting Swap API</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/docs/0x-swap-api/api-references/overview">API References</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/docs/0x-swap-api/advanced-topics/rate-limits">Advanced Topics</a></div></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/category/gasless-api">Gasless API</a><button aria-label="Toggle the collapsible sidebar category &#x27;Gasless API&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/category/orderbook-api">Orderbook API</a><button aria-label="Toggle the collapsible sidebar category &#x27;Orderbook API&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/category/limit-order-advanced-traders">Limit Order (Advanced Traders)</a><button aria-label="Toggle the collapsible sidebar category &#x27;Limit Order (Advanced Traders)&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/category/liquidity-providers">Liquidity Providers</a><button aria-label="Toggle the collapsible sidebar category &#x27;Liquidity Providers&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/category/developer-resources">Developer Resources</a><button aria-label="Toggle the collapsible sidebar category &#x27;Developer Resources&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a href="https://0x.org/docs/next/upgrading/upgrading_to_swap_v2" target="_blank" rel="noopener noreferrer" class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false">Upgrading</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/category/need-help">Need Help?</a><button aria-label="Toggle the collapsible sidebar category &#x27;Need Help?&#x27;" type="button" class="clean-btn menu__caret"></button></div></li></ul></nav><button type="button" title="Collapse sidebar" aria-label="Collapse sidebar" class="button button--secondary button--outline collapseSidebarButton_gXcz"><svg width="20" height="20" aria-hidden="true" class="collapseSidebarButtonIcon_D5lV"><g fill="#7a7a7a"><path d="M9.992 10.023c0 .2-.062.399-.172.547l-4.996 7.492a.982.982 0 01-.828.454H1c-.55 0-1-.453-1-1 0-.2.059-.403.168-.551l4.629-6.942L.168 3.078A.939.939 0 010 2.528c0-.548.45-.997 1-.997h2.996c.352 0 .649.18.828.45L9.82 9.472c.11.148.172.347.172.55zm0 0"></path><path d="M19.98 10.023c0 .2-.058.399-.168.547l-4.996 7.492a.987.987 0 01-.828.454h-3c-.547 0-.996-.453-.996-1 0-.2.059-.403.168-.551l4.625-6.942-4.625-6.945a.939.939 0 01-.168-.55 1 1 0 01.996-.997h3c.348 0 .649.18.828.45l4.996 7.492c.11.148.168.347.168.55zm0 0"></path></g></svg></button></div></div></aside><main class="docMainContainer_sClo"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_PKDA"><div class="docItemContainer_QFIQ"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_cHyX" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/docs/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_jXFD"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/docs/category/swap-api"><span itemprop="name">Swap API</span></a><meta itemprop="position" content="1"></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Guides</span><meta itemprop="position" content="2"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Use Swap API liquidity in your smart contracts</span><meta itemprop="position" content="3"></li></ul></nav><span class="theme-doc-version-badge badge badge--secondary">Version: 1.0</span><div class="tocCollapsible_Xuni theme-doc-toc-mobile tocMobile_rGAa"><button type="button" class="clean-btn tocCollapsibleButton_mL4T">On this page</button></div><div class="theme-doc-markdown markdown"><h1>Use 0x Swap API Liquidity in Your Smart Contracts</h1><h2 class="anchor anchorWithStickyNavbar_ZTCp" id="overview">Overview<a href="#overview" class="hash-link" aria-label="Direct link to Overview" title="Direct link to Overview">â€‹</a></h2><p>After you complete this guide, you will have a smart contract that swaps WETH for DAI, powered by Swap API.</p><p>In the example, we will:</p><ol><li>Deposit WETH into our contract.</li><li>Fetch a quote to sell WETH for DAI from Swap API.</li><li>Fill that quote through our contract, converting its WETH into DAI.</li></ol><h2 class="anchor anchorWithStickyNavbar_ZTCp" id="set-up-the-project">Set up the project<a href="#set-up-the-project" class="hash-link" aria-label="Direct link to Set up the project" title="Direct link to Set up the project">â€‹</a></h2><p>We will use our <a href="https://github.com/0xProject/0x-api-starter-guide-code" target="_blank" rel="noopener noreferrer">0x API starter project</a>, which contains the all the contracts and javascript necessary for this example. This project will use <a href="https://www.trufflesuite.com/truffle" target="_blank" rel="noopener noreferrer"><code>truffle</code></a> for compiling and deploying our contracts and <a href="https://web3js.readthedocs.io/en/v1.3.0/" target="_blank" rel="noopener noreferrer"><code>web3.js</code></a> for interacting with deployed contracts.</p><p>Begin by cloning the starter project and installing dependencies:</p><div class="language-bash codeBlockContainer_jAEB theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_KvLn"><pre tabindex="0" class="prism-code language-bash codeBlock_MJTT thin-scrollbar"><code class="codeBlockLines_ZhcI"><span class="token-line" style="color:#F8F8F2"><span class="token plain">$ </span><span class="token function" style="color:rgb(80, 250, 123)">git</span><span class="token plain"> clone git@github.com:0xProject/0x-api-starter-guide-code</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">$ </span><span class="token builtin class-name" style="color:rgb(189, 147, 249)">cd</span><span class="token plain"> 0x-api-starter-guide-code</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">$ </span><span class="token function" style="color:rgb(80, 250, 123)">npm</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">install</span><span class="token plain"> --dev</span><br></span></code></pre><div class="buttonGroup_yTD5"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_hEBG" aria-hidden="true"><svg class="copyButtonIcon_e3Xs" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_IS7T" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_ZTCp" id="the-forked-test-environment">The forked test environment<a href="#the-forked-test-environment" class="hash-link" aria-label="Direct link to The forked test environment" title="Direct link to The forked test environment">â€‹</a></h3><p>All the examples in the project can be run without cost using a forked <a href="https://github.com/trufflesuite/ganache-cli" target="_blank" rel="noopener noreferrer">ganache</a> instance against Ethereum mainnet. To start the forked instance, run the following:</p><div class="language-bash codeBlockContainer_jAEB theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_KvLn"><pre tabindex="0" class="prism-code language-bash codeBlock_MJTT thin-scrollbar"><code class="codeBlockLines_ZhcI"><span class="token-line" style="color:#F8F8F2"><span class="token comment" style="color:rgb(98, 114, 164)"># Replace ETHEREUM_RPC_URL with your mainnet node endpoint URL (e.g., infura)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">$ </span><span class="token assign-left variable" style="color:rgb(189, 147, 249);font-style:italic">RPC_URL</span><span class="token operator">=</span><span class="token plain">ETHEREUM_RPC_URL </span><span class="token function" style="color:rgb(80, 250, 123)">npm</span><span class="token plain"> run start-fork</span><br></span></code></pre><div class="buttonGroup_yTD5"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_hEBG" aria-hidden="true"><svg class="copyButtonIcon_e3Xs" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_IS7T" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_ZTCp" id="the-swap-contract">The swap contract<a href="#the-swap-contract" class="hash-link" aria-label="Direct link to The swap contract" title="Direct link to The swap contract">â€‹</a></h2><p>The contract that will be directly filling 0x-API quotes is <a href="https://github.com/0xProject/0x-api-starter-guide-code/blob/master/contracts/SimpleTokenSwap.sol" target="_blank" rel="noopener noreferrer"><code>SimpleTokenSwap</code></a>. It implements a <code>fillQuote()</code> function that accepts and executes a 0x-API quote to convert some amount of its ERC20 tokens into another. For simplicity, this contract is not designed for use with plain ETH. However, WETH and ETH pairs are identical markets in 0x-API, so this will not affect pricing.</p><h3 class="anchor anchorWithStickyNavbar_ZTCp" id="the-fill-function">The fill function<a href="#the-fill-function" class="hash-link" aria-label="Direct link to The fill function" title="Direct link to The fill function">â€‹</a></h3><p>The swap is executed when the owner calls the <code>fillQuote()</code> function. Prior to calling this function, the <code>SimpleTokenSwap</code> contract should be funded with at least <code>sellAmount</code> (from the API response) of <code>sellToken</code> to complete the swap.</p><p>In this function we:</p><ol><li>Grant the <code>allowanceTarget</code> an allowance to spend <code>sellToken</code> on this contract&#x27;s behalf.</li><li>Execute the ERC20-&gt;ERC20 swap.</li><li>Transfer any leftover ETH (protocol fee refunds) to the sender.</li></ol><div class="language-js codeBlockContainer_jAEB theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_KvLn"><pre tabindex="0" class="prism-code language-js codeBlock_MJTT thin-scrollbar"><code class="codeBlockLines_ZhcI"><span class="token-line" style="color:#F8F8F2"><span class="token comment" style="color:rgb(98, 114, 164)">// Swaps ERC20-&gt;ERC20 tokens held by this contract using a 0x-API quote.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">function</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">fillQuote</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token comment" style="color:rgb(98, 114, 164)">// The `sellTokenAddress` field from the API response.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token constant" style="color:rgb(189, 147, 249)">IERC20</span><span class="token plain"> sellToken</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token comment" style="color:rgb(98, 114, 164)">// The `buyTokenAddress` field from the API response.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token constant" style="color:rgb(189, 147, 249)">IERC20</span><span class="token plain"> buyToken</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token comment" style="color:rgb(98, 114, 164)">// The `allowanceTarget` field from the API response.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    address spender</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token comment" style="color:rgb(98, 114, 164)">// The `to` field from the API response.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    address payable swapTarget</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token comment" style="color:rgb(98, 114, 164)">// The `data` field from the API response.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    bytes calldata swapCallData</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    external</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    onlyOwner</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    payable </span><span class="token comment" style="color:rgb(98, 114, 164)">// Must attach ETH equal to the `value` field from the API response.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token comment" style="color:rgb(98, 114, 164)">// ...</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token comment" style="color:rgb(98, 114, 164)">// Give `spender` an infinite allowance to spend this contract&#x27;s `sellToken`.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token comment" style="color:rgb(98, 114, 164)">// Note that for some tokens (e.g., USDT, KNC), you must first reset any existing</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token comment" style="color:rgb(98, 114, 164)">// allowance to 0 before being able to update it.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token function" style="color:rgb(80, 250, 123)">require</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">sellToken</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token method function property-access" style="color:rgb(80, 250, 123)">approve</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">spender</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">uint256</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token comment" style="color:rgb(98, 114, 164)">// Call the encoded swap function call on the contract at `swapTarget`,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token comment" style="color:rgb(98, 114, 164)">// passing along any ETH attached to this function call to cover protocol fees.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">bool success</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> swapTarget</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token property-access">call</span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token literal-property property">value</span><span class="token operator">:</span><span class="token plain"> msg</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token property-access">value</span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">swapCallData</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token function" style="color:rgb(80, 250, 123)">require</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">success</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&#x27;SWAP_CALL_FAILED&#x27;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token comment" style="color:rgb(98, 114, 164)">// Refund any unspent protocol fees to the sender.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    msg</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token property-access">sender</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token method function property-access" style="color:rgb(80, 250, 123)">transfer</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token function" style="color:rgb(80, 250, 123)">address</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">this</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token property-access">balance</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token comment" style="color:rgb(98, 114, 164)">// ...</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><br></span></code></pre><div class="buttonGroup_yTD5"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_hEBG" aria-hidden="true"><svg class="copyButtonIcon_e3Xs" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_IS7T" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_ZTCp" id="deposit-function">Deposit function<a href="#deposit-function" class="hash-link" aria-label="Direct link to Deposit function" title="Direct link to Deposit function">â€‹</a></h3><p>Since the contract will sell its own balance of a token when executing a swap, it needs to hold a balance of that token beforehand. In this example, we will be selling WETH, which can easily be minted from ETH. So the contract has a deposit function that accepts ETH and wraps it into WETH.</p><div class="language-js codeBlockContainer_jAEB theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_KvLn"><pre tabindex="0" class="prism-code language-js codeBlock_MJTT thin-scrollbar"><code class="codeBlockLines_ZhcI"><span class="token-line" style="color:#F8F8F2"><span class="token comment" style="color:rgb(98, 114, 164)">// Transfer ETH into this contract and wrap it into WETH.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">function</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">depositETH</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    external</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    payable</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token constant" style="color:rgb(189, 147, 249)">WETH</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token property-access">deposit</span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token literal-property property">value</span><span class="token operator">:</span><span class="token plain"> msg</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token property-access">value</span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><br></span></code></pre><div class="buttonGroup_yTD5"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_hEBG" aria-hidden="true"><svg class="copyButtonIcon_e3Xs" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_IS7T" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_ZTCp" id="payable-fallback">Payable fallback<a href="#payable-fallback" class="hash-link" aria-label="Direct link to Payable fallback" title="Direct link to Payable fallback">â€‹</a></h3><p>Certain quotes require a protocol fee, in ETH, to be attached to the swap call. But it&#x27;s possible that by the time the transaction is mind, the swap will end up not needing to pay the protocol fee. In these cases, the protocol fee would be refunded to the taker, which is in this case is the <code>SimpleTokenSwap</code> contract. So it&#x27;s important that your contract be able to receive this ETH through either a payable <code>fallback()</code> or <code>receive()</code> function (in solidity 0.6+).</p><div class="language-js codeBlockContainer_jAEB theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_KvLn"><pre tabindex="0" class="prism-code language-js codeBlock_MJTT thin-scrollbar"><code class="codeBlockLines_ZhcI"><span class="token-line" style="color:#F8F8F2"><span class="token comment" style="color:rgb(98, 114, 164)">// Payable fallback to allow this contract to receive protocol fee refunds.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token function" style="color:rgb(80, 250, 123)">receive</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> external payable </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><br></span></code></pre><div class="buttonGroup_yTD5"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_hEBG" aria-hidden="true"><svg class="copyButtonIcon_e3Xs" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_IS7T" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_ZTCp" id="compiling-and-deploying-the-contract">Compiling and deploying the contract<a href="#compiling-and-deploying-the-contract" class="hash-link" aria-label="Direct link to Compiling and deploying the contract" title="Direct link to Compiling and deploying the contract">â€‹</a></h3><p>Before we can run the example, we will need to compile and deploy the contract to the forked network:</p><div class="language-bash codeBlockContainer_jAEB theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_KvLn"><pre tabindex="0" class="prism-code language-bash codeBlock_MJTT thin-scrollbar"><code class="codeBlockLines_ZhcI"><span class="token-line" style="color:#F8F8F2"><span class="token function" style="color:rgb(80, 250, 123)">npm</span><span class="token plain"> run deploy-fork</span><br></span></code></pre><div class="buttonGroup_yTD5"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_hEBG" aria-hidden="true"><svg class="copyButtonIcon_e3Xs" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_IS7T" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_ZTCp" id="using-the-contract">Using the contract<a href="#using-the-contract" class="hash-link" aria-label="Direct link to Using the contract" title="Direct link to Using the contract">â€‹</a></h2><p>The complete interaction with the contract is in the <a href="https://github.com/0xProject/0x-api-starter-guide-code/blob/master/src/swap-contract.js" target="_blank" rel="noopener noreferrer"><code>swap-contract.js</code></a> script. This script does the following:</p><ul><li>Fund the deployed <code>SimpleTokenSwap</code> contract with WETH.</li><li>Fetch a swap quote from 0x-API to convert said WETH to DAI.</li><li>Call <code>fillQuote()</code> on the <code>SimpleTokenSwap</code> contract to execute the swap.</li></ul><h3 class="anchor anchorWithStickyNavbar_ZTCp" id="fund-the-contract">Fund the contract<a href="#fund-the-contract" class="hash-link" aria-label="Direct link to Fund the contract" title="Direct link to Fund the contract">â€‹</a></h3><p>First we call <code>depositETH()</code>, which accepts ETH and wraps it into WETH, to give the contract a balance (<code>sellAmountWei</code>) of WETH .</p><div class="language-js codeBlockContainer_jAEB theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_KvLn"><pre tabindex="0" class="prism-code language-js codeBlock_MJTT thin-scrollbar"><code class="codeBlockLines_ZhcI"><span class="token-line" style="color:#F8F8F2"><span class="token keyword control-flow" style="color:rgb(189, 147, 249);font-style:italic">await</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">waitForTxSuccess</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    contract</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token property-access">methods</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token method function property-access" style="color:rgb(80, 250, 123)">depositETH</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token method function property-access" style="color:rgb(80, 250, 123)">send</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token literal-property property">value</span><span class="token operator">:</span><span class="token plain"> sellAmountWei</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token keyword module" style="color:rgb(189, 147, 249);font-style:italic">from</span><span class="token operator">:</span><span class="token plain"> owner</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><br></span></code></pre><div class="buttonGroup_yTD5"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_hEBG" aria-hidden="true"><svg class="copyButtonIcon_e3Xs" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_IS7T" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_ZTCp" id="fetch-a-quote-from-0x-api">Fetch a quote from 0x API<a href="#fetch-a-quote-from-0x-api" class="hash-link" aria-label="Direct link to Fetch a quote from 0x API" title="Direct link to Fetch a quote from 0x API">â€‹</a></h3><p>Next we make an HTTP request to 0x-API (at <code>https://api.0x.org/swap/v1/quote</code>) for a quote to convert that WETH into DAI.</p><div class="language-js codeBlockContainer_jAEB theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_KvLn"><pre tabindex="0" class="prism-code language-js codeBlock_MJTT thin-scrollbar"><code class="codeBlockLines_ZhcI"><span class="token-line" style="color:#F8F8F2"><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">const</span><span class="token plain"> qs </span><span class="token operator">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">createQueryString</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token literal-property property">sellToken</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&#x27;WETH&#x27;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token literal-property property">buyToken</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&#x27;DAI&#x27;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token literal-property property">sellAmount</span><span class="token operator">:</span><span class="token plain"> sellAmountWei</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">const</span><span class="token plain"> headers </span><span class="token operator">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token string" style="color:rgb(255, 121, 198)">&#x27;0x-api-key: [api-key]&#x27;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"> </span><span class="token comment" style="color:rgb(98, 114, 164)">// This is a placeholder. Get your live API key from the 0x Dashboard (https://dashboard.0x.org/apps)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">const</span><span class="token plain"> quoteUrl </span><span class="token operator">=</span><span class="token plain"> </span><span class="token template-string template-punctuation string" style="color:rgb(255, 121, 198)">`</span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:rgb(248, 248, 242)">${</span><span class="token template-string interpolation constant" style="color:rgb(189, 147, 249)">API_QUOTE_URL</span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token template-string string" style="color:rgb(255, 121, 198)">?</span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:rgb(248, 248, 242)">${</span><span class="token template-string interpolation">qs</span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token template-string template-punctuation string" style="color:rgb(255, 121, 198)">`</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">const</span><span class="token plain"> response </span><span class="token operator">=</span><span class="token plain"> </span><span class="token keyword control-flow" style="color:rgb(189, 147, 249);font-style:italic">await</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">fetch</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">quoteUrl</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"> headers </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">const</span><span class="token plain"> quote </span><span class="token operator">=</span><span class="token plain"> </span><span class="token keyword control-flow" style="color:rgb(189, 147, 249);font-style:italic">await</span><span class="token plain"> response</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token method function property-access" style="color:rgb(80, 250, 123)">json</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><br></span></code></pre><div class="buttonGroup_yTD5"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_hEBG" aria-hidden="true"><svg class="copyButtonIcon_e3Xs" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_IS7T" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>The returned quote will have fields such as:</p><div class="language-js codeBlockContainer_jAEB theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_KvLn"><pre tabindex="0" class="prism-code language-js codeBlock_MJTT thin-scrollbar"><code class="codeBlockLines_ZhcI"><span class="token-line" style="color:#F8F8F2"><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token literal-property property">to</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&#x27;0xdef1c0ded9bec7f1a1670819833240f027b25eff&#x27;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token literal-property property">data</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&#x27;0x415565b0000000000000000000000000...&#x27;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token literal-property property">allowanceTarget</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&#x27;0xf740b67da229f2f10bcbd38a7979992fcc71b8eb&#x27;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token literal-property property">sellTokenAddress</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&#x27;0xc02aaa39b223fe8d0a0e5c4f27ead9083c756cc2&#x27;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token literal-property property">buyTokenAddress</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&#x27;0x6b175474e89094c44da98b954eedeac495271d0f&#x27;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token literal-property property">value</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&#x27;0&#x27;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token literal-property property">gasPrice</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&#x27;8000000000&#x27;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token literal-property property">gas</span><span class="token operator">:</span><span class="token plain"> </span><span class="token number">12345678</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token spread operator">...</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><br></span></code></pre><div class="buttonGroup_yTD5"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_hEBG" aria-hidden="true"><svg class="copyButtonIcon_e3Xs" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_IS7T" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_ZTCp" id="fill-the-quote-through-our-contract">Fill the quote through our contract<a href="#fill-the-quote-through-our-contract" class="hash-link" aria-label="Direct link to Fill the quote through our contract" title="Direct link to Fill the quote through our contract">â€‹</a></h3><p>We can now pass fields from this quote into the <code>fillQuote()</code> function on our contract to be filled. This will cause the contract to swap its WETH balance for DAI.</p><div class="language-js codeBlockContainer_jAEB theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_KvLn"><pre tabindex="0" class="prism-code language-js codeBlock_MJTT thin-scrollbar"><code class="codeBlockLines_ZhcI"><span class="token-line" style="color:#F8F8F2"><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">const</span><span class="token plain"> receipt </span><span class="token operator">=</span><span class="token plain"> </span><span class="token keyword control-flow" style="color:rgb(189, 147, 249);font-style:italic">await</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">waitForTxSuccess</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    contract</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token property-access">methods</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token method function property-access" style="color:rgb(80, 250, 123)">fillQuote</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">quote</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token property-access">sellTokenAddress</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> quote</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token property-access">buyTokenAddress</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> quote</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token property-access">allowanceTarget</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> quote</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token property-access">to</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> quote</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token property-access">data</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token method function property-access" style="color:rgb(80, 250, 123)">send</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><span class="token keyword module" style="color:rgb(189, 147, 249);font-style:italic">from</span><span class="token operator">:</span><span class="token plain"> owner</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><span class="token literal-property property">value</span><span class="token operator">:</span><span class="token plain"> quote</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token property-access">value</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><span class="token literal-property property">gasPrice</span><span class="token operator">:</span><span class="token plain"> quote</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token property-access">gasPrice</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><br></span></code></pre><div class="buttonGroup_yTD5"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_hEBG" aria-hidden="true"><svg class="copyButtonIcon_e3Xs" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_IS7T" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_ZTCp" id="running-the-example">Running the example<a href="#running-the-example" class="hash-link" aria-label="Direct link to Running the example" title="Direct link to Running the example">â€‹</a></h3><p>We can run this example with the command:</p><div class="language-bash codeBlockContainer_jAEB theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_KvLn"><pre tabindex="0" class="prism-code language-bash codeBlock_MJTT thin-scrollbar"><code class="codeBlockLines_ZhcI"><span class="token-line" style="color:#F8F8F2"><span class="token function" style="color:rgb(80, 250, 123)">npm</span><span class="token plain"> run swap-contract-fork</span><br></span></code></pre><div class="buttonGroup_yTD5"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_hEBG" aria-hidden="true"><svg class="copyButtonIcon_e3Xs" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_IS7T" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>If all goes well, you should see output similar to:</p><div class="codeBlockContainer_jAEB theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_KvLn"><pre tabindex="0" class="prism-code language-text codeBlock_MJTT thin-scrollbar"><code class="codeBlockLines_ZhcI"><span class="token-line" style="color:#F8F8F2"><span class="token plain">Fetching quote https://api.0x.org/swap/v1/quote?sellToken=WETH&amp;buyToken=DAI&amp;sellAmount=100000000000000000...</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Received a quote with price 371.15289757586245518</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Filling the quote through the contract at 0x7382949f535C1bb4D64059b934d4A63A11D3DAa2...</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">âœ” Successfully sold 0.1 WETH for 37.115276285540685651 DAI!</span><br></span></code></pre><div class="buttonGroup_yTD5"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_hEBG" aria-hidden="true"><svg class="copyButtonIcon_e3Xs" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_IS7T" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/0x-swap-api/guides/accessing-rfq-liquidity/how-to-integrate-rfq-liquidity"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">How to access RFQ liquidity</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/0x-swap-api/guides/troubleshooting-swap-api"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Troubleshooting Swap API</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_vpdH thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#overview" class="table-of-contents__link toc-highlight">Overview</a></li><li><a href="#set-up-the-project" class="table-of-contents__link toc-highlight">Set up the project</a><ul><li><a href="#the-forked-test-environment" class="table-of-contents__link toc-highlight">The forked test environment</a></li></ul></li><li><a href="#the-swap-contract" class="table-of-contents__link toc-highlight">The swap contract</a><ul><li><a href="#the-fill-function" class="table-of-contents__link toc-highlight">The fill function</a></li><li><a href="#deposit-function" class="table-of-contents__link toc-highlight">Deposit function</a></li><li><a href="#payable-fallback" class="table-of-contents__link toc-highlight">Payable fallback</a></li><li><a href="#compiling-and-deploying-the-contract" class="table-of-contents__link toc-highlight">Compiling and deploying the contract</a></li></ul></li><li><a href="#using-the-contract" class="table-of-contents__link toc-highlight">Using the contract</a><ul><li><a href="#fund-the-contract" class="table-of-contents__link toc-highlight">Fund the contract</a></li><li><a href="#fetch-a-quote-from-0x-api" class="table-of-contents__link toc-highlight">Fetch a quote from 0x API</a></li><li><a href="#fill-the-quote-through-our-contract" class="table-of-contents__link toc-highlight">Fill the quote through our contract</a></li><li><a href="#running-the-example" class="table-of-contents__link toc-highlight">Running the example</a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">APIs</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/docs/category/swap-api">Swap API</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/category/gasless-api">Gasless API</a></li></ul></div><div class="col footer__col"><div class="footer__title">Developers</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://dashboard.0x.org/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Login/Sign Up</a></li><li class="footer__item"><a href="https://www.0x.org/content-hub" target="_blank" rel="noopener noreferrer" class="footer__link-item">Content Hub</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/developer-resources/faqs-and-troubleshooting">FAQs &amp; Troubleshooting</a></li><li class="footer__item"><a href="https://status.0x.org/" target="_blank" rel="noopener noreferrer" class="footer__link-item">0x System Status</a></li><li class="footer__item"><a href="https://sepoliafaucet.com/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Sepolia Faucet</a></li><li class="footer__item"><a href="https://www.alchemy.com/gwei-calculator" target="_blank" rel="noopener noreferrer" class="footer__link-item">Gwei Calculator</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://twitter.com/0xproject" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_lY7B"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright Â© 2024</div></div></div></footer></div>
<script src="/docs/assets/js/runtime~main.81fc3c4f.js"></script>
<script src="/docs/assets/js/main.f8b18ed4.js"></script>
</body>
</html>